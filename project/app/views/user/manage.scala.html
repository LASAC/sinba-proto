@* View destinada ao gerenciamento dos usuários por parte do admin *@
@(title: String, userList: List[User], userPermissionForm: Form[models.UserPermission])

@import views.html.common._

@main(title) {
	<div class="table-responsive">   
			<table class="table table-striped table-bordered">
				<thead>
					<tr>
						<th>Nome e E-mail do solicitante</th>
						<th>Justificativa</th>
						<th>Permissão</th>
						<th>Aprovar/Reprovar</th>
					</tr>
				</thead>
				<tbody>
					@for(user <- userList) {
					<tr>
						<td>@user.name (@user.email)</td>
						<td><i>@user.justification</i></td>
						@helper.form(action = routes.UserController.updatePermission()) {
						<td>
						@* TODO:
							@helper.select(field=userPermissionForm("id"),
									options=Seq(
										"0" -> "Leitor", 
										"1" -> "Contribuidor",
										"2" -> "Administrador Intermediário",
										"3" -> "Administrador"
									)
								)
						*@
							<select id="id" name="id">
								<option value="0">Leitor</option>
								<option value="1">Contribuidor</option>
								<option value="2">Administrador Intermediário</option>
								<option value="3">Administrador</option>
							</select>
							@if(user.permission == null) {
								(Pendente)
							}
						</td>
						<td>
							@if(user.permission == null) {
								<input type="submit" class="btn btn-success" value="Aprovar" onclick="return false;" />
							}
							<a href="#" onclick="handle('@routes.UserController.deny(user.id)', 'POST');">
								<button type="button" class="btn btn-warning">Excluir</button>
							</a>
						</td>
						}
					</tr>
					}
				</tbody>

				@div_message("Atenção", "Você tem " + userList.size() + " novas solicitações!")
			</table>
		</div>
}